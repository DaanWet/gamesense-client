/**
 * gamesense-client
 * @version 2.0.3
 * @author Christian Schuller <cschuller>
 * @license MIT
 */

!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.gamesense=t()}(this,function(){"use strict";var r={GameClient:function(n,a){var s=require("http"),e=require("promise"),t=null;function r(e){var t,i={};return e.value_optional||(i.value=e.value),e.frame&&("Bitmap"===e.frame.constructor.name?(t={bitmap:e.frame.bitmap},e.frame.excluded_events&&(t["excluded-events"]=e.frame.excluded_events),i.frame=t):i.frame=e.frame),{event:e.name,data:i}}function i(){o("/game_heartbeat",{game:n.name})}function o(t,_){return new e(function(i,n){var r=JSON.stringify(_),o={host:a.host,port:a.port,path:t,method:"POST",headers:{"Content-Type":"application/json","Content-Length":r.length}},e=s.request(o,function(t){t.setEncoding("utf8"),t.on("data",function(e){200===t.statusCode?i(e):n({jsonData:r,request:o,statusCode:t.statusCode,error:e})})});e.write(r),e.end()})}this.registerGame=function(){return o("/game_metadata",{game:n.name,game_display_name:n.displayName,developer:n.developer,deinitialize_timer_length_ms:n.deinitialize_timer_length_ms})},this.removeGame=function(){return o("/remove_game",{game:n.name})},this.registerEvent=function(e){return o("/register_game_event",{game:n.name,event:e.name,min_value:e.minValue,max_value:e.maxValue,icon_id:e.icon,value_optional:e.value_optional})},this.removeEvent=function(e){return o("/remove_game_event",{game:n.name,event:e.name})},this.bindEvent=function(e,t){return o("/bind_game_event",{game:n.name,event:e.name,min_value:e.minValue,max_value:e.maxValue,icon_id:e.icon,value_optional:e.value_optional,handlers:t.map(function(e){return e.toHandlerData()})})},this.sendGameEventUpdate=function(e){e=r(e);return e.game=n.name,o("/game_event",e)},this.sendMultipleEventUpdate=function(i){var e={host:a.host,port:a.port,path:"/supports_multiple_game_events",method:"GET"};return s.get(e,function(e){if(200===e.statusCode)return o("/multiple_game_events",{game:n.name,events:i.map(r)});for(var t in i)this.sendGameEventUpdate(t)})},this.startHeartbeatSending=function(){t=setInterval(i,1e4)},this.stopHeartbeatSending=function(){t&&clearInterval(t)}},Bitmap:function(e,t){this.bitmap=e.map(function(e){return[e.red,e.green,e.blue]}),this.excluded_events=t?t.map(function(e){return e.name}):null},Color:function(e,t,i){this.red=e,this.green=t,this.blue=i},ColorRange:function(e,t,i){this.low=e,this.high=t,this.color=i},ColorRanges:function(e){this.ranges=e||[]},GradientColor:function(e,t){this.zero=e,this.hundred=t},DeviceType:{KEYBOARD:"keyboard",MOUSE:"mouse",HEADSET:"headset",INDICATOR:"indicator",RGB_ZONED:"rgb-zoned-device",RGB_1_ZONE:"rgb-1-zone",RGB_2_ZONE:"rgb-2-zone",RGB_3_ZONE:"rgb-3-zone",RGB_5_ZONE:"rgb-5-zone",RGB_8_ZONE:"rgb-8-zone",RGB_12_ZONE:"rgb-12-zone",RGB_17_ZONE:"rgb-17-zone",RGB_24_ZONE:"rgb-24-zone",RGB_103_ZONE:"rgb-103-zone",RGB_PER_KEY_ZONES:"rgb-per-key-zones",SCREENED:"screened",TACTILE:"tactile"},EventIcon:{NO_ICON:0,HEALTH:1,ARMOR:2,AMMUNITION:3,MONEY:4,FLASH_EXPLOSION:5,KILLS:6,HEADSHOT:7,HELMET:8,HUNGER:10,AIR_BREATH:11,COMPASS:12,TOOL_PICKAXE:13,MANA_POTION:14,CLOCK:15,LIGHTNING:16,ITEM_BACKPACK:17,AT_SYMBOL:18,MUTED:19,TALKING:20,CONNECT:21,DISCONNECT:22,MUSIC:23,PLAY:24,PAUSE:25,CPU:27,GPU:28,RAM:29,ASSISTS:30,CREEP_SCORE:31,DEAD:32,DRAGON:33,ENEMIES:35,GAME_START:36,GOLD:37,HEALTH_2:38,KILLS_2:39,MANA_2:40,TEAMMATES:41,TIMER:42,TEMPERATURE:43},HeadsetZone:{EARCUPS:"earcups"},RgbZone:{ONE:"one"},KeyboardZone:{FUNCTION_KEYS:"function-keys",MAIN_KEYBOARD:"main-keyboard",KEYPAD:"keypad",NUMBER_KEYS:"number-keys",MACRO_KEYS:"macro-keys"},MouseZone:{WHEEL:"wheel",LOGO:"logo",BASE:"base"},RgbPerKeyZone:{LOGO:"logo",A:"a",B:"b",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",J:"j",K:"k",L:"l",M:"m",N:"n",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",U:"u",V:"v",W:"w",X:"x",Y:"y",Z:"z",KEYBOARD_1:"keyboard-1",KEYBOARD_2:"keyboard-2",KEYBOARD_3:"keyboard-3",KEYBOARD_4:"keyboard-4",KEYBOARD_5:"keyboard-5",KEYBOARD_6:"keyboard-6",KEYBOARD_7:"keyboard-7",KEYBOARD_8:"keyboard-8",KEYBOARD_9:"keyboard-9",KEYBOARD_0:"keyboard-0",RETURN:"return",ESCAPE:"escape",BACKSPACE:"backspace",TAB:"tab",SPACEBAR:"spacebar",CAPS:"caps",DASH:"dash",EQUAL:"equal",LEFT_BRACKET:"l-bracket",RIGHT_BRACKET:"r-bracket",BACKSLASH:"backslash",POUND_HASHMARK:"pound",SEMICOLON:"semicolon",QUOTE:"quote",BACKQUOTE:"backquote",COMMA:"comma",PERIOD:"period",SLASH:"slash",F1:"f1",F2:"f2",F3:"f3",F4:"f4",F5:"f5",F6:"f6",F7:"f7",F8:"f8",F9:"f9",F10:"f10",F11:"f11",F12:"f12",PRINT_SCREEN:"printscreen",SCROLL_LOCK:"scrolllock",PAUSE:"pause",INSERT:"insert",HOME:"home",PAGE_UP:"pageup",DELETE:"delete",END:"end",PAGE_DOWN:"pagedown",RIGHT_ARROW:"rightarrow",LEFT_ARROW:"leftarrow",DOWN_ARROW:"downarrow",UP_ARROW:"uparrow",KEYPAD_NUM_LOCK:"keypad-num-lock",KEYPAD_DIVIDE:"keypad-divide",KEYPAD_TIMES:"keypad-times",KEYPAD_MINUS:"keypad-minus",KEYPAD_PLUS:"keypad-plus",KEYPAD_ENTER:"keypad-enter",KEYPAD_PERIOD:"keypad-period",KEYPAD_0:"keypad-0",KEYPAD_1:"keypad-1",KEYPAD_2:"keypad-2",KEYPAD_3:"keypad-3",KEYPAD_4:"keypad-4",KEYPAD_5:"keypad-5",KEYPAD_6:"keypad-6",KEYPAD_7:"keypad-7",KEYPAD_8:"keypad-8",KEYPAD_9:"keypad-9",LEFT_CTRL:"l-ctrl",LEFT_SHIFT:"l-shift",LEFT_ALT:"l-alt",LEFT_WIN:"l-win",RIGHT_CTRL:"r-ctrl",RIGHT_SHIFT:"r-shift",RIGHT_ALT:"r-alt",RIGHT_WIN:"r-win",STEELSERIES_KEY:"ss-key",WIN_MENU:"win-menu",MACRO_0:"m0",MACRO_1:"m1",MACRO_2:"m2",MACRO_3:"m3",MACRO_4:"m4",MACRO_5:"m5",FUNCTION_KEYS:"function-keys",NUMBER_KEYS:"number-keys",Q_ROW:"q-row",A_ROW:"a-row",Z_ROW:"z-row",MACRO_KEYS:"macro-keys",ALL_MACRO_KEYS:"all-macro-keys",MAIN_KEYBOARD:"main-keyboard",NAV_CLUSTER:"nav-cluster",ARROWS:"arrows",KEYPAD:"keypad",KEYPAD_NUMBERS:"keypad-nums",ALL:"all"}};return r.RgbZone={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen",17:"seventeen",18:"eighteen",19:"nineteen",20:"twenty",21:"twenty-one",22:"twenty-two",23:"twenty-three",24:"twenty-four",25:"twenty-five",26:"twenty-six",27:"twenty-seven",28:"twenty-eight",29:"twenty-nine",30:"thirty",31:"thirty-one",32:"thirty-two",33:"thirty-three",34:"thirty-four",35:"thirty-five",36:"thirty-six",37:"thirty-seven",38:"thirty-eight",39:"thirty-nine",40:"forty",41:"forty-one",42:"forty-two",43:"forty-three",44:"forty-four",45:"forty-five",46:"forty-six",47:"forty-seven",48:"forty-eight",49:"forty-nine",50:"fifty",51:"fifty-one",52:"fifty-two",53:"fifty-three",54:"fifty-four",55:"fifty-five",56:"fifty-six",57:"fifty-seven",58:"fifty-eight",59:"fifty-nine",60:"sixty",61:"sixty-one",62:"sixty-two",63:"sixty-three",64:"sixty-four",65:"sixty-five",66:"sixty-six",67:"sixty-seven",68:"sixty-eight",69:"sixty-nine",70:"seventy",71:"seventy-one",72:"seventy-two",73:"seventy-three",74:"seventy-four",75:"seventy-five",76:"seventy-six",77:"seventy-seven",78:"seventy-eight",79:"seventy-nine",80:"eighty",81:"eighty-one",82:"eighty-two",83:"eighty-three",84:"eighty-four",85:"eighty-five",86:"eighty-six",87:"eighty-seven",88:"eighty-eight",89:"eighty-nine",90:"ninety",91:"ninety-one",92:"ninety-two",93:"ninety-three",94:"ninety-four",95:"ninety-five",96:"ninety-six",97:"ninety-seven",98:"ninety-eight",99:"ninety-nine",100:"one-hundred",101:"one-hundred-one",102:"one-hundred-two",103:"one-hundred-three"},r.ScreenZone={ONE:"one"},r.TactileZone={ONE:"one"},r.VibrationType={CUSTOM:"custom",STRONGCLICK_100:"ti_predefined_strongclick_100",STRONGCLICK_60:"ti_predefined_strongclick_60",STRONGCLICK_30:"ti_predefined_strongclick_30",SHARPCLICK_100:"ti_predefined_sharpclick_100",SHARPCLICK_60:"ti_predefined_sharpclick_60",SHARPCLICK_30:"ti_predefined_sharpclick_30",SOFTBUMP_100:"ti_predefined_softbump_100",SOFTBUMP_60:"ti_predefined_softbump_60",SOFTBUMP_30:"ti_predefined_softbump_30",DOUBLECLICK_100:"ti_predefined_doubleclick_100",DOUBLECLICK_60:"ti_predefined_doubleclick_60",TRIPLECLICK_100:"ti_predefined_tripleclick_100",SOFTFUZZ_60:"ti_predefined_softfuzz_60",STRONGBUZZ_100:"ti_predefined_strongbuzz_100",BUZZALERT750MS:"ti_predefined_buzzalert750ms",BUZZALERT1000MS:"ti_predefined_buzzalert1000ms",STRONGCLICK1_100:"ti_predefined_strongclick1_100",STRONGCLICK2_80:"ti_predefined_strongclick2_80",STRONGCLICK3_60:"ti_predefined_strongclick3_60",STRONGCLICK4_30:"ti_predefined_strongclick4_30",MEDIUMCLICK1_100:"ti_predefined_mediumclick1_100",MEDIUMCLICK2_80:"ti_predefined_mediumclick2_80",MEDIUMCLICK3_60:"ti_predefined_mediumclick3_60",SHARPTICK1_100:"ti_predefined_sharptick1_100",SHARPTICK2_80:"ti_predefined_sharptick2_80",SHARPTICK3_60:"ti_predefined_sharptick3_60",SHORTDOUBLECLICKSTRONG1_100:"ti_predefined_shortdoubleclickstrong1_100",SHORTDOUBLECLICKSTRONG2_80:"ti_predefined_shortdoubleclickstrong2_80",SHORTDOUBLECLICKSTRONG3_60:"ti_predefined_shortdoubleclickstrong3_60",SHORTDOUBLECLICKSTRONG4_30:"ti_predefined_shortdoubleclickstrong4_30",SHORTDOUBLECLICKMEDIUM1_100:"ti_predefined_shortdoubleclickmedium1_100",SHORTDOUBLECLICKMEDIUM2_80:"ti_predefined_shortdoubleclickmedium2_80",SHORTDOUBLECLICKMEDIUM3_60:"ti_predefined_shortdoubleclickmedium3_60",SHORTDOUBLESHARPTICK1_100:"ti_predefined_shortdoublesharptick1_100",SHORTDOUBLESHARPTICK2_80:"ti_predefined_shortdoublesharptick2_80",SHORTDOUBLESHARPTICK3_60:"ti_predefined_shortdoublesharptick3_60",LONGDOUBLESHARPCLICKSTRONG1_100:"ti_predefined_longdoublesharpclickstrong1_100",LONGDOUBLESHARPCLICKSTRONG2_80:"ti_predefined_longdoublesharpclickstrong2_80",LONGDOUBLESHARPCLICKSTRONG3_60:"ti_predefined_longdoublesharpclickstrong3_60",LONGDOUBLESHARPCLICKSTRONG4_30:"ti_predefined_longdoublesharpclickstrong4_30",LONGDOUBLESHARPCLICKMEDIUM1_100:"ti_predefined_longdoublesharpclickmedium1_100",LONGDOUBLESHARPCLICKMEDIUM2_80:"ti_predefined_longdoublesharpclickmedium2_80",LONGDOUBLESHARPCLICKMEDIUM3_60:"ti_predefined_longdoublesharpclickmedium3_60",LONGDOUBLESHARPTICK1_100:"ti_predefined_longdoublesharptick1_100",LONGDOUBLESHARPTICK2_80:"ti_predefined_longdoublesharptick2_80",LONGDOUBLESHARPTICK3_60:"ti_predefined_longdoublesharptick3_60",BUZZ1_100:"ti_predefined_buzz1_100",BUZZ2_80:"ti_predefined_buzz2_80",BUZZ3_60:"ti_predefined_buzz3_60",BUZZ4_40:"ti_predefined_buzz4_40",BUZZ5_20:"ti_predefined_buzz5_20",PULSINGSTRONG1_100:"ti_predefined_pulsingstrong1_100",PULSINGSTRONG2_60:"ti_predefined_pulsingstrong2_60",PULSINGMEDIUM1_100:"ti_predefined_pulsingmedium1_100",PULSINGMEDIUM2_60:"ti_predefined_pulsingmedium2_60",PULSINGSHARP1_100:"ti_predefined_pulsingsharp1_100",PULSINGSHARP2_60:"ti_predefined_pulsingsharp2_60",TRANSITIONCLICK1_100:"ti_predefined_transitionclick1_100",TRANSITIONCLICK2_80:"ti_predefined_transitionclick2_80",TRANSITIONCLICK3_60:"ti_predefined_transitionclick3_60",TRANSITIONCLICK4_40:"ti_predefined_transitionclick4_40",TRANSITIONCLICK5_20:"ti_predefined_transitionclick5_20",TRANSITIONCLICK6_10:"ti_predefined_transitionclick6_10",TRANSITIONHUM1_100:"ti_predefined_transitionhum1_100",TRANSITIONHUM2_80:"ti_predefined_transitionhum2_80",TRANSITIONHUM3_60:"ti_predefined_transitionhum3_60",TRANSITIONHUM4_40:"ti_predefined_transitionhum4_40",TRANSITIONHUM5_20:"ti_predefined_transitionhum5_20",TRANSITIONHUM6_10:"ti_predefined_transitionhum6_10",TRANSITIONRAMPDOWNLONGSMOOTH1_100TO0:"ti_predefined_transitionrampdownlongsmooth1_100to0",TRANSITIONRAMPDOWNLONGSMOOTH2_100TO0:"ti_predefined_transitionrampdownlongsmooth2_100to0",TRANSITIONRAMPDOWNMEDIUMSMOOTH1_100TO0:"ti_predefined_transitionrampdownmediumsmooth1_100to0",TRANSITIONRAMPDOWNMEDIUMSMOOTH2_100TO0:"ti_predefined_transitionrampdownmediumsmooth2_100to0",TRANSITIONRAMPDOWNSHORTSMOOTH1_100TO0:"ti_predefined_transitionrampdownshortsmooth1_100to0",TRANSITIONRAMPDOWNSHORTSMOOTH2_100TO0:"ti_predefined_transitionrampdownshortsmooth2_100to0",TRANSITIONRAMPDOWNLONGSHARP1_100TO0:"ti_predefined_transitionrampdownlongsharp1_100to0",TRANSITIONRAMPDOWNLONGSHARP2_100TO0:"ti_predefined_transitionrampdownlongsharp2_100to0",TRANSITIONRAMPDOWNMEDIUMSHARP1_100TO0:"ti_predefined_transitionrampdownmediumsharp1_100to0",TRANSITIONRAMPDOWNMEDIUMSHARP2_100TO0:"ti_predefined_transitionrampdownmediumsharp2_100to0",TRANSITIONRAMPDOWNSHORTSHARP1_100TO0:"ti_predefined_transitionrampdownshortsharp1_100to0",TRANSITIONRAMPDOWNSHORTSHARP2_100TO0:"ti_predefined_transitionrampdownshortsharp2_100to0",TRANSITIONRAMPUPLONGSMOOTH1_0TO100:"ti_predefined_transitionrampuplongsmooth1_0to100",TRANSITIONRAMPUPLONGSMOOTH2_0TO100:"ti_predefined_transitionrampuplongsmooth2_0to100",TRANSITIONRAMPUPMEDIUMSMOOTH1_0TO100:"ti_predefined_transitionrampupmediumsmooth1_0to100",TRANSITIONRAMPUPMEDIUMSMOOTH2_0TO100:"ti_predefined_transitionrampupmediumsmooth2_0to100",TRANSITIONRAMPUPSHORTSMOOTH1_0TO100:"ti_predefined_transitionrampupshortsmooth1_0to100",TRANSITIONRAMPUPSHORTSMOOTH2_0TO100:"ti_predefined_transitionrampupshortsmooth2_0to100",TRANSITIONRAMPUPLONGSHARP1_0TO100:"ti_predefined_transitionrampuplongsharp1_0to100",TRANSITIONRAMPUPLONGSHARP2_0TO100:"ti_predefined_transitionrampuplongsharp2_0to100",TRANSITIONRAMPUPMEDIUMSHARP1_0TO100:"ti_predefined_transitionrampupmediumsharp1_0to100",TRANSITIONRAMPUPMEDIUMSHARP2_0TO100:"ti_predefined_transitionrampupmediumsharp2_0to100",TRANSITIONRAMPUPSHORTSHARP1_0TO100:"ti_predefined_transitionrampupshortsharp1_0to100",TRANSITIONRAMPUPSHORTSHARP2_0TO100:"ti_predefined_transitionrampupshortsharp2_0to100",TRANSITIONRAMPDOWNLONGSMOOTH1_50TO0:"ti_predefined_transitionrampdownlongsmooth1_50to0",TRANSITIONRAMPDOWNLONGSMOOTH2_50TO0:"ti_predefined_transitionrampdownlongsmooth2_50to0",TRANSITIONRAMPDOWNMEDIUMSMOOTH1_50TO0:"ti_predefined_transitionrampdownmediumsmooth1_50to0",TRANSITIONRAMPDOWNMEDIUMSMOOTH2_50TO0:"ti_predefined_transitionrampdownmediumsmooth2_50to0",TRANSITIONRAMPDOWNSHORTSMOOTH1_50TO0:"ti_predefined_transitionrampdownshortsmooth1_50to0",TRANSITIONRAMPDOWNSHORTSMOOTH2_50TO0:"ti_predefined_transitionrampdownshortsmooth2_50to0",TRANSITIONRAMPDOWNLONGSHARP1_50TO0:"ti_predefined_transitionrampdownlongsharp1_50to0",TRANSITIONRAMPDOWNLONGSHARP2_50TO0:"ti_predefined_transitionrampdownlongsharp2_50to0",TRANSITIONRAMPDOWNMEDIUMSHARP1_50TO0:"ti_predefined_transitionrampdownmediumsharp1_50to0",TRANSITIONRAMPDOWNMEDIUMSHARP2_50TO0:"ti_predefined_transitionrampdownmediumsharp2_50to0",TRANSITIONRAMPDOWNSHORTSHARP1_50TO0:"ti_predefined_transitionrampdownshortsharp1_50to0",TRANSITIONRAMPDOWNSHORTSHARP2_50TO0:"ti_predefined_transitionrampdownshortsharp2_50to0",TRANSITIONRAMPUPLONGSMOOTH1_0TO50:"ti_predefined_transitionrampuplongsmooth1_0to50",TRANSITIONRAMPUPLONGSMOOTH2_0TO50:"ti_predefined_transitionrampuplongsmooth2_0to50",TRANSITIONRAMPUPMEDIUMSMOOTH1_0TO50:"ti_predefined_transitionrampupmediumsmooth1_0to50",TRANSITIONRAMPUPMEDIUMSMOOTH2_0TO50:"ti_predefined_transitionrampupmediumsmooth2_0to50",TRANSITIONRAMPUPSHORTSMOOTH1_0TO50:"ti_predefined_transitionrampupshortsmooth1_0to50",TRANSITIONRAMPUPSHORTSMOOTH2_0TO50:"ti_predefined_transitionrampupshortsmooth2_0to50",TRANSITIONRAMPUPLONGSHARP1_0TO50:"ti_predefined_transitionrampuplongsharp1_0to50",TRANSITIONRAMPUPLONGSHARP2_0TO50:"ti_predefined_transitionrampuplongsharp2_0to50",TRANSITIONRAMPUPMEDIUMSHARP1_0TO50:"ti_predefined_transitionrampupmediumsharp1_0to50",TRANSITIONRAMPUPMEDIUMSHARP2_0TO50:"ti_predefined_transitionrampupmediumsharp2_0to50",TRANSITIONRAMPUPSHORTSHARP1_0TO50:"ti_predefined_transitionrampupshortsharp1_0to50",TRANSITIONRAMPUPSHORTSHARP2_0TO50:"ti_predefined_transitionrampupshortsharp2_0to50",LONGBUZZFORPROGRAMMATICSTOPPING_100:"ti_predefined_longbuzzforprogrammaticstopping_100",SMOOTHHUM1NOKICKORBRAKEPULSE_50:"ti_predefined_smoothhum1nokickorbrakepulse_50",SMOOTHHUM2NOKICKORBRAKEPULSE_40:"ti_predefined_smoothhum2nokickorbrakepulse_40",SMOOTHHUM3NOKICKORBRAKEPULSE_30:"ti_predefined_smoothhum3nokickorbrakepulse_30",SMOOTHHUM4NOKICKORBRAKEPULSE_20:"ti_predefined_smoothhum4nokickorbrakepulse_20",SMOOTHHUM5NOKICKORBRAKEPULSE_10:"ti_predefined_smoothhum5nokickorbrakepulse_10"},r.VisualizationMode={COLOR:"color",PERCENT:"percent",COUNT:"count",CONTEXT_COLOR:"context-color"},r.Game=function(e,t,i,n){this.name=e.toUpperCase(),this.displayName=t,this.developer=i,this.deinitialize_timer_length_ms=n},r.GameEvent=function(e){this.name=e.toUpperCase(),this.icon=r.EventIcon.NO_ICON,this.minValue=0,this.maxValue=1,this.value=0,this.value_optional=!1,this.frame=null},r.ColorEventHandler=function(e,t,i){this.deviceType=e||r.DeviceType.RGB_PER_KEY_ZONES,this.zone=t||"logo",this.customZoneKeys=null,this.color=i||new r.Color(0,0,255),this.mode=r.VisualizationMode.COLOR,this.rate=null,this.context_frame_key=null,this.toHandlerData=function(){var e={zone:this.zone,color:this.color,mode:this.mode};if(!this.deviceType)throw new Error("bindEvent failed: Missing device type.");return e["device-type"]=this.deviceType,this.rate&&(e.rate=this.rate.toRateData()),"GradientColor"===this.color.constructor.name?e.color={gradient:this.color}:"ColorRanges"===this.color.constructor.name&&(e.color=this.color.ranges),this.customZoneKeys&&(e["custom-zone-keys"]=this.customZoneKeys),this.context_frame_key&&this.mode===r.VisualizationMode.CONTEXT_COLOR&&(e["context-frame-key"]=this.context_frame_key),e}},r.FullColorEventHandler=function(e,t){this.partial_bitmap=e||!1,this.excluded_events=t,this.toHandlerData=function(){var e={mode:this.partial_bitmap?"partial-bitmap":"bitmap","device-type":"rgb-per-key-zones"};return this.excluded_events&&(e["excluded-events"]=this.excluded_events.map(function(e){return e.name})),e}},r.ScreenEventHandler=function(e,t){this.deviceType=e||r.DeviceType.SCREENED,this.zone=t||r.ScreenZone.ONE,this.datas=null,this.toHandlerData=function(){var e={zone:this.zone,mode:"screen"};function t(e){var t={};if(e.frame_modifiers&&(e.frame_modifiers.length_millis&&(t["length-millis"]=e.frame_modifiers.length_millis),e.frame_modifiers.icon_id&&(t["icon-id"]=e.frame_modifiers.icon_id),e.frame_modifiers.repeats&&(t.repeats=e.frame_modifiers.repeats)),"SingleLineFrame"===e.constructor.name){var i,n=e.line_data.toLineData();for(i in n)t[i]=n[i]}else"MultiLineFrame"===e.constructor.name?t.lines=e.lines.map(function(e){return e.toLineData()}):"ImageFrame"===e.constructor.name&&(t["has-text"]=!1,t["image-data"]=e.image_data);return t}return e["device-type"]=this.deviceType,this.datas&&"RangeScreenData"===this.datas[0].constructor.name?e.datas=this.datas.map(function(e){return{low:e.low,high:e.high,datas:e.datas.map(t)}}):this.datas&&(e.datas=this.datas.map(t)),e}},r.TactileEventHandler=function(e,t,i,n){this.deviceType=e||r.DeviceType.TACTILE,this.zone=t||r.TactileZone.ONE,this.pattern=i||[],this.rate=n,this.toHandlerData=function(){var e={zone:this.zone,mode:"vibrate"};if("RangePattern"===this.pattern.constructor.name?e.pattern=this.pattern.toPatternData():e.pattern=this.pattern.map(function(e){return e.toPatternData()}),!this.deviceType)throw new Error("bindEvent failed: Missing device type.");return e["device-type"]=this.deviceType,this.rate&&(e.rate=this.rate.toRateData()),e}},r.Frequency=function(e){this.frequency=e},r.FrequencyRange=function(e,t,i){this.low=e,this.high=t,this.freq=i},r.FrequencyRanges=function(e){this.ranges=e||[]},r.Rate=function(e,t){this.frequency=e,this.repeat_limit=t,this.toRateData=function(){"Frequency"===this.frequency.constructor.name?e=this.frequency.frequency:"FrequencyRanges"===this.frequency.constructor.name&&(e=this.frequency.ranges.map(function(e){return{low:e.low,high:e.high,frequency:e.freq}}));var e={frequency:e};return this.repeat_limit&&("RepeatLimit"===this.repeat_limit.constructor.name?e.repeat_limit=this.repeat_limit.repeat_limit:"RepeatLimitRanges"===this.repeat_limit.constructor.name&&(e.repeat_limit=this.repeat_limit.ranges.map(function(e){return{low:range.low,high:range.high,repeat_limit:e.repeat_limit}}))),e}},r.RepeatLimit=function(e){this.repeat_limit=e},r.RepeatLimitRange=function(e,t,i){this.low=e,this.high=t,this.repeat_limit=i},r.RepeatLimitRanges=function(e){this.ranges=e||[]},r.FrameModifiers=function(e,t,i){this.length_millis=e,this.icon_id=t,this.repeats=i},r.MultiLineFrame=function(e,t){this.image_data=e,this.frame_modifiers=t},r.LineData=function(e){this.progress_bar=e,this.prefix=null,this.suffix=null,this.bold=null,this.wrap=null,this.arg=null,this.context_frame_key=null,this.toLineData=function(){var e={"has-text":!0};return this.progress_bar&&(e["has-progress-bar"]=this.progress_bar,e["has-text"]=!1),this.prefix&&(e.prefix=this.prefix),this.suffix&&(e.suffix=this.suffix),this.bold&&(e.bold=this.bold),this.wrap&&(e.wrap=this.wrap),this.arg&&(e.arg=this.arg),this.context_frame_key&&(e["context-frame-key"]=this.context_frame_key),e}},r.MultiLineFrame=function(e,t){this.lines=e,this.frame_modifiers=t},r.RangeScreenData=function(e,t,i){this.low=e,this.high=t,this.datas=i},r.SingleLineFrame=function(e,t){this.line_data=e,this.frame_modifiers=t},r.ServerEndpoint=function(e){var i=this,t=require("fs");function n(e){var t=/(http|ftp|https):\/\/([\w-]+(\.[\w-]*)+)([\w.,@?^=%&amp;:/~+#-]*[\w@?^=%&amp;/~+#-])?/.exec(e);i.url=e,i.baseUrl=e.replace(t[4],""),i.host=t[2],i.port=parseInt(t[4].replace(":",""))}this.url=e,this.baseUrl=null,this.host=null,this.port=null,this.discoverUrl=function(e){e=e||("darwin"===process.platform?"/Library/Application Support/SteelSeries Engine 3/coreProps.json":"%PROGRAMDATA%/SteelSeries/SteelSeries Engine 3/coreProps.json"),e=e.replace(/%([^%]+)%/g,function(e,t){return process.env[t]}),e=t.readFileSync(e,{encoding:"utf-8"});if(e){e=JSON.parse(e);if(!e.address)throw new Error("Discover url failed: The core props does not contain address property.");n("http://"+e.address)}},e&&n(e)},r.PatternEntry=function(e,t){this.type=e,this.delay_ms=null,this.length_ms=t,this.toPatternData=function(){var e={type:this.type};if(this.type===r.VibrationType.CUSTOM){if(!this.length_ms)throw new Error("length_ms mandatory for custom vibration type");e["length-ms"]=this.length_ms}return this.delay_ms&&(e["delay-ms"]=this.delay_ms),e}},r.RangePattern=function(e,t,i){this.low=e,this.high=t,this.pattern=i,this.toPatternData=function(){var e={low:this.low,high:this.high};return"RangePattern"===this.pattern.constructor.name?e.pattern=this.pattern.toPatternData():e.pattern=this.pattern.map(function(e){return e.toPatternData()}),e}},r});